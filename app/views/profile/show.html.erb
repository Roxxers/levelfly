<div id="avatar" class="avatar_portal">
  <img id="body" class="avatar" src="/assets/avatar/<%= @profile.avatar.body %>">
  <img id="hair" class="avatar" src="/assets/avatar/<%= @profile.avatar.hair %>">
  <img id="head" class="avatar" src="/assets/avatar/<%= @profile.avatar.head %>">
  <img id="shoes" class="avatar" src="/assets/wardrobe/<%= @profile.avatar.shoes %>">
  <img id="bottom" class="avatar" src="/assets/wardrobe/<%= @profile.avatar.bottom %>">
  <img id="top" class="avatar" src="/assets/wardrobe/<%= @profile.avatar.top %>">
</div>

<div id="controls" class="avatar_controls">
  <input id="full_name" name="full_name" value="<%=h @profile.full_name%>">
  <input id="modify" name="modify" type="button" class="clickable" value="MODIFY">
</div>

<div id="wardrobe_options" class="wardrobe_options">
  <div id="wardrobe_categories" class="wardrobe_categories">
    <div id="category_0" class="wardrobe_item clickable">Head</div>
    <div id="category_1" class="wardrobe_item clickable">Body</div>
    <div id="category_2" class="wardrobe_item clickable">Legs</div>
    <div id="category_3" class="wardrobe_item clickable">Feet</div>
    <div id="category_4" class="wardrobe_item clickable">Misc</div>
  </div>

  <div id="wardrobe_subcategories" class="wardrobe_subcategories">
    <div id="subcategory_0" class="wardrobe_item clickable"></div>
    <div id="subcategory_1" class="wardrobe_item clickable"></div>
    <div id="subcategory_2" class="wardrobe_item clickable"></div>
    <div id="subcategory_3" class="wardrobe_item clickable"></div>
    <div id="subcategory_4" class="wardrobe_item clickable"></div>
  </div>
</div>

<script type="text/javascript">

var _wardrobe;

$(document).ready(function() {
  
  if ($("#full_name").val() == "") {
    $("#full_name").val("Enter Full Name");
    $("#wardrobe_options").hide();
    $("#wardrobe_subcategories").hide();
  }
  
  $("#modify").click(function() {
    $.getJSON("/profile/edit", { id: "999" },
       function(data){
         for (i=0; i<data.length; i++) {
           if (data[i].name == "Head") {
             $("#category_0").attr("value", data[i].id)
           }
         }
         _wardrobe = data;
         
         $("#wardrobe_options").show();
       });  
  })

  $("#category_0").click(function() {
    showSubCategory($(this).attr("value"));
    });
  
});

function showSubCategory(id) {
  idx = 0;
  for (i=0; i<_wardrobe.length; i++) {
    if (_wardrobe[i].parent_item_id == id) {
      $("#subcategory_"+idx).html(_wardrobe[i].name);
      idx = idx + 1;
    }
  }
  $("#wardrobe_subcategories").show();
}

</script>
<!-- Leader Board Top -->
<div style="position:relative;">
	<div style="position:absolute; width:100%;">
		<div class="pr120">
			<div class="leader_pad_top container_tipshelp"> 
				<div class="tops_row">
					<div class="leftimg panel"></div>
					<div class="centerimg panel"></div>
					<div class="rightimg panel"></div>
				</div>
			</div>
		</div>
	</div>
</div>

<div class="leader_content">
  <div class="leader_board_left">
    <div class="leader_board_right">
      <div class="leader_board_center main_div_height">
        <div class="leader_pad_top"></div>
        <div class="leader_pad">
           
          <div class="leader_TabCSS">
          <div class="steel_pin"><img src="/images/pin_steel.png" /></div>
          <div class="leader_topselect clearfix">
            <div class="titleTextPeople">Show:&nbsp;&nbsp;
              <span>
                <select class="dd_input brown_bg" id="filter_files" style="width:180px;">
                  <option value="all_active" class="brown_bg">All Users</option>
                  <option value="members_of_courses" class="brown_bg">Members of Courses</option>
                  <option value="members_of_groups" class="brown_bg">Members of Groups</option>
                  <optgroup label="Courses">
                    <%courses = all_course("C")%>
                    <% if courses and !courses.nil?%>
                      <% courses.each do |course| %>
                        <option value="<%=course.id%>" class="brown_bg"><%=course.name%></option>
                      <% end %> 
                    <% end %>
                  </optgroup>
                  <optgroup label="Groups">
                     <%courses = all_course("G")%>
                     <% if courses and !courses.nil?%>
                       <% courses.each do |course| %>
                         <option value="<%=course.id%>" class="brown_bg"><%=course.name%></option>
                       <% end %> 
                     <% end %>
                   </optgroup>
                </select>
             </span>
            </div>
            <div class="titleCountPeople"><%= @users.count %> users</div>
            <div class="clear"></div>
          </div>
            <div id="load_users">
              <%= render :partial => "/users/load_users", :locals => {:@users=>@users} %>
            </div>  
        </div>         
        <div class="end_of_page"></div>
       </div>
      </div>
    </div>
  </div>
</div>
 <div id="sidebar_right">
    <div class="course_side_buttons">
        <a class="big_blue_btn" name="create_new_user" id="create_new_user" href="javascript:void(0)">ADD PERSON</a>
        <a class="big_blue_btn" name="message_to_user" id="message_to_user" href="javascript:void(0)">EMAIL ALL</a>
    </div><!-- crud_level -->
  </div>

<script type="text/javascript">

$(document).ready(function(){
  setPageTitle("People");

  /*$('a.view_user').click(function() {
    showSpinner(true);
    url = this.href
    $("#container").load(url, function(){
      showSpinner(false);
    }); 
    return false; 
  });*/
  $("#create_new_user").click(function(){
    showSpinner(true);
    $("#container").load("users/new", function(){
      showSpinner(false);
    }); 
  });
});
  
$("#filter_files").change(function(){
    var id = $("#filter_files").val();
    if(id){
      showSpinner(true);
      $.ajax({
        type: "POST",  
        url: "/users/load_users",  
        data: {id:id},
        success: function(data) {
          var count = $('.LB_tablecontent', data).length,
              plural = count != 1;

          $("#load_users").html(data);
          $('.titleCountPeople').html(count + (plural ? ' users' : ' user'));
          showSpinner(false);
        }
      });
    }
  });

</script>